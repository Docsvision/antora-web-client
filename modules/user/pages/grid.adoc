= Работа с представлениями (грид)

Новый грид стал доступен для всех пользователей на всех устройствах. Грид имеет два режима отображения: таблица (используется по умолчанию) или xref:grid-ribbon.adoc[лента]. Переключить режим можно кнопками image:buttons/grid-ribbon.png[Таблица-список] на панели управления.

Новый грид заменяет старый вид представления. Пользовательские групповые операции, созданные для старого грида, будут корректно работать в новом.
// Старый вид представления остаётся доступным при определённых условиях, подробнее см. xref:admin:.grid-old.adoc[].

include::partial$excerpts.adoc[tags=gridSaved]

Пользовательские настройки грида сохраняются для текущего пользователя в текущей папке с текущим представлением до тех пор, пока не будут очищены нажатием на кнопку *Сбросить настройки* на xref:grid-toolbar.adoc[панели управления].

.Кнопка "Сбросить настройки"
image::reset-grid-settings.png[Кнопка "Сбросить настройки"]

Новый грид поддерживает прозрачность. Прозрачность регулируется свойством xref:layouts:ctrl/folderComponents/folderGrid.adoc#transparency[Непрозрачность] элемента управления `_Карточки папки_`. По умолчанию значение свойства `*Непрозрачность*` равняется 100%, то есть грид полностью непрозрачен. При желании значение может быть изменено.

[#functions]
== Функциональные возможности нового грида

Новый грид предоставляет функции настройки представления разметок. Функции можно вызвать с <<toolbar,панели инструментов>> или из <<context,контекстного меню>>. На компьютерах контекстное меню вызывается правой кнопкой мыши, на планшетах -- долгим касанием.

[#lines]
=== Строки

Каждая строка грида -- отдельная карточка. Перед каждой строкой отображается флаг, который можно установить. Если флаг установлен, значит строка (карточка) выбрана.

Если установит флаг в заголовке колонки с флагами, будут выбраны все карточки в папке.

.Выбрать все карточки
image::grid-select-all.png[Выбрать все карточки]

По умолчанию непрочитанные карточки выделяются синим цветом. Администратор может настроить свой цвет или добавить дополнительные цвета для других состояний. Инструкция по настройке цвета представления приведена в руководстве по настройке {dv}.

Чтобы отметить карточку прочитанной, нажмите на синий индикатор слева от заголовка строки. Нажмите на индикатор повторно, чтобы снова отметить карточку как непрочитанную.

[#scroll]
==== Прокрутка

Карточки в новом гриде загружаются на одной странице порциями. При прокрутке списка карточек вверх или вниз появляются кнопки навигации. При нажатии на кнопку список карточек будет прокручен до самой верхней или самой нижней строки соответственно.

.Кнопки навигации вверх-вниз
image::buttons/top-bottom.png[Стрелки в круге]

При наведении курсора на область прокрутки, отображается количество карточек, отображаемое на странице в формате `N -- X` (например, `3 -- 22`). N и X -- первая и последняя строки, отображаемые на экране.

.Отображение строк в области прокрутки
image::buttons/line-numbers.png[Отображение строк в области прокрутки]

[#highlight]
==== Выделение строк цветом

Если в РМА настроено выделение строк представления цветом, строки грида также будут выделяться цветом.

Непрочитанные карточки выделяются цветом без дополнительных настроек.

.Выделение непрочитанных карточек
image::grid-highlight.png[Выделение непрочитанных карточек]

[#columns]
=== Колонки

Информация о карточке (тип, название, автор, статус и т.д.) отображается в отдельных колонках. Наведите курсор мыши на правую границу колонки, чтобы изменить её ширину.

.Регулировка ширины колонки "Подготовил"
image::grid-col-width.png[Регулировка ширины колонки "Подготовил"]

В версии для планшетов изменить размер колонки можно долгим удержанием пальца на её границе.

Дробные и целые числовые значения в таблице грида выравниваются по правому краю колонки.

.Выравнивание числовых значений
image::grid-numbers.png[Выравнивание числовых значений]

HTML-код в ячейках грида будет отображаться в виде строки кода или с форматированием в зависимости от xref:engineer::view-settings-colums.adoc#html[настроек представления] в РМА.

[#update]
=== Обновление папки

include::partial$excerpts.adoc[tags=auto-update]

Если в папке включено автообновление данных, вы можете продолжить работать с отображаемыми данными или обновить представление, чтобы показать новые карточки. Если в папке появились новые непрочитанные карточки, появляется следующее уведомление:

.Есть новые непрочитанные карточки
image::auto-update.png[Есть новые непрочитанные карточки]

После перехода сессии текущего пользователя в офлайн-режим, появляется окно с предупреждением о необходимости перезагрузить страницу и двумя кнопками: *Перезагрузить* и *Отмена*. При нажатии *Обновить* текущая страница будет обновлена. При нажатии *Отмена* возможны ошибки, т.к. система будет пытаться получить данные из закрытой по истечении времени неактивности сессии (без авторизации).

.Сообщение о неактивности сессии
image::inactivity.png[Сообщение о неактивности сессии]

Окно отображается только на страницах представлений грида. Отображение окна регулируется параметром в конфигурационном файле модуля `SessionInactiveMessageHide`. Если значение параметра задано как `false` (по умолчанию), окно будет появляться. Если указано значение `true`, окно не отображается.

[#toolbar]
=== Панель инструментов

xref:grid-toolbar.adoc[Панель инструментов грида] (toolbar) предоставляет следующие функции:

- Группировка и индикация количества карточек.
- Обновить данные представления.
- Переключение режима грид -- xref:grid-ribbon.adoc[лента].
- Прочитать все карточки в папке.
- Экспорт представления в Excel.
- Сбросить пользовательские настройки.
- Изменить пользовательские настройки, включая:
* Используемое представление.
* Отображение и порядок колонок.
* Перенос или обрезание строк.

[#group]
=== Группировка

Если перетащить заголовок колонки на панель инструментов, содержимое колонки будет xref:grid-group.adoc[сгруппировано].

[#filter]
=== Фильтрация

xref:grid-filter.adoc[Фильтр] можно применить нажатием кнопки image:buttons/filter-grey.png[Фильтр] в заголовке колонки.

[#sort]
=== Сортировка

xref:grid-sort.adoc[Сортировка] в гриде осуществляется по данным колонок в алфавитном порядке, от меньшего числа к большему. Порядок может быть инвертирован нажатием на заголовок колонки.

[#batch]
=== Групповые операции

Новый грид поддерживает работу с xref:grid-batch.adoc[групповыми операциями].

.Доступные групповые операции нового грида:
- Прочитать.
- Копировать ярлык карточки.
- Переместить ярлык карточки.
- Удалить ярлык карточки.
- Групповое делегирование.

Панель групповых операций становится активной, когда установлен флаг слева от заголовка карточки. Если групповых операций слишком много, панель можно минимизировать кнопкой
image:buttons/batch-expand.png[Треугольник].

NOTE: В браузере Internet Explorer панель скрывается не до конца.

[#count]
=== Количество карточек

В папках может отображаться количество карточек. В обычных условиях отображается абсолютное число карточек в папке. Например, 100. Если включена постраничная проверка прав в представлении, отображается абсолютное число карточек с плюсом. Например, 100+. Если в представлении включён фильтр или группировка, отображается число сгруппированных карточек. Фильтрация, группировка и постраничная проверка прав могут быть скомбинированы.

Если в папке настроено автоматическое обновление и система определяет, что в папке есть новые карточки, выводится сообщение "В текущей папке есть новые непрочитанные карточки!". Можно обновить содержимое папки, чтобы показать новые данные, или продолжить работу без обновления.

[#context]
=== Контекстное меню

При нажатии правой кнопкой мыши в режиме ПК и долгом нажатии пальца в режиме планшета в области грида вызывается контекстное меню. Контекстное меню доступно, когда активно свойство xref:layouts:ctrl/folderComponents/folderGrid.adoc#context[Контекстное меню] для ЭУ `_Карточки папки_`.

Функции контекстного меню, дублирующие функции панели инструментов будут недоступны, если отключены в настройках ЭУ "xref:layouts:ctrl/folderComponents/folderGrid.adoc[Карточки папки]".

:grid: таблицы
//tag::context[]
.Функции, доступные из контекстного меню {grid}:
//end::context[]
- _Отфильтровать по значению_ -- функция доступна при нажатии правой кнопкой мыши (долгом касании) в конкретной ячейке. Работает как фильтр, введённый вручную и применяется автоматически.
- _Сгруппировать по столбцу_ -- применяет группировку по колонке, из которой было вызвано контекстное меню.
//tag::context[]
- _Скопировать адрес ссылки_ -- копирует адрес ссылки для карточки, в строке которой было вызвано контекстное меню.
//end::context[]
- _Скопировать текст ячейки_ -- копирует текст ячейки, по нажатию на которую было вызвано контекстное меню.
//tag::context[]
// - _Дублировать карточку_ -- создаёт дубликат карточки, подробнее функциональность описана в разделе "xref:.cards-duplicate.adoc[]".
- _Открыть_ -- открывает карточку, на строке которой было вызвано контекстное меню.
- _Открыть в новой вкладке_ -- в новой вкладке открывает карточку, на строке которой было вызвано контекстное меню.
- _Открыть в новом окне_ -- в новом окне открывает карточку, на строке которой было вызвано контекстное меню.
//end::context[]

[#search]
== Поиск в папках

Новый грид поддерживает xref:search.adoc[поиск] в папках. Если настроен полнотекстовый поиск, доступны следующие области поиска:

- В текущей папке.
- В текущей папке и подпапках.
- В найденном.
- Везде.

В некоторых локациях количество доступных областей поиска может быть ограничено.

При определённых условиях в гриде может отображаться область xref:grid-aggregate.adoc[агрегации].

include::partial$excerpts.adoc[tags=help]
