= Настройка элемента управления для работы с несколькими файлами

Элемент управления "xref:ctrl/table/table.adoc[Таблица]" может быть использован для работы с табличной секций, содержащей ссылки на карточки `_Файла_` с версиями.

.Чтобы настроить таблицу для работы с файлами:
. Добавьте в разметку карточки элемент управления `_Таблица_`.
. В свойстве `*Источник данных*` выберите табличную секцию карточки, содержащую ссылки на карточки файла с версиями. Например, для _Документа_ можно указать секцию _Файлы_.
+
NOTE: Поле в не типовой табличной секции должно обязательно иметь настройки: "Ссылка" -- карточка файла с версиями, "Тип ссылки" -- сильная.
+
. Установите флаг `*Скрыть кнопку добавления строк*`.
. В зависимости от назначения разметки установите `*Режим редактирования*`:
+
* *_Редактирование_*. Для разметки создания или редактирования карточки,
+
[NOTE]
====
Допускается добавление элемента с режимом *_Редактирование_* в разметку, предназначенную для просмотра данных. В этом случае необходимо самостоятельно реализовать функцию сохранения значения элемента управления с использованием скриптов карточки.
====
+
* *_По месту_*. Для просмотра карточки.
. В свойстве `*Минимальная высота*` ЭУ `_Таблица_` можно установить собственный размер для блока приёма файла. Блок будет отображаться в ЭУ `_Таблица_` при добавлении файлов перетаскиванием с устройства.
. Если требуется, заполните другие свойства `_Таблицы_` (например, заголовок).
. Добавьте в таблицу элементы управления:
* "xref:ctrl/table/addFileToTable.adoc[Таблица / Добавить файл]". В свойствах можно указать текст, который будет отображаться при добавлении файла перетаскиванием, отключить режим добавления перетаскиванием, а также ограничить работу с функцией с помощью операции редактирования.
* "xref:ctrl/table/downloadAllTableFiles.adoc[Таблица / Скачать все]". В настройках можно ограничить возможность использования функции с помощью операции редактирования.
+
NOTE: Если возможность добавления и/или скачивания всех файлов не требуется, указанные элементы управления можно не добавлять.
+
. Добавьте в таблицу ЭУ xref:ctrl/table/tableColumn.adoc[Столбец таблицы], в котором будут отображаться файлы.
+
NOTE: При необходимости можно добавить столбцы для отображения других данных из секции, выбранной в настройках таблицы.
+
. В ЭУ `_Столбец таблицы_` добавьте элемент управления "xref:ctrl/standard/filePicker.adoc[Файл]", который будет использоваться для добавления и отображения добавленных файлов.
+
. В свойстве `*Поле данных*` ЭУ `_Файл_` выберите поле, содержащее ссылку на карточку `_Файла_` с версиями. В свойстве `*Источник данных*` должна быть указана секция, которая была выбрана источником данных `_Таблицы_`.
. В зависимости от назначения разметки установите `*Режим редактирования*`:
* *_Редактирование_*. Для разметки создания/редактирования или просмотра (сохранение значения реализуется с помощью скриптов) карточки.
* *_По месту_*. Для просмотра карточки.
. Снимите флаг `*Включить версионинг*`, если не требуется работа с версиями файла (будут скрыты команды работы с версиями и номер версии файла).
. Если требуется, заполните другие свойства элемента управления (например, `*Обязательность*`).
+
.Пример разметки карточки с таблицей, настроенной для работы с файлами
image::table-with-files-sample.png[Пример разметки карточки с таблицей, настроенной для работы с файлами]
+
. Сохраните разметку.
